<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîß Admin - ‡∏£‡∏û.‡∏£‡∏≤‡∏ä‡∏ß‡∏¥‡∏ñ‡∏µ</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <style>
        * { font-family: 'Sarabun', sans-serif; }
        :root { --pink: #e91e8c; }
        body { background: #f5f5f5; }
        .sidebar {
            position: fixed; left: 0; top: 0; bottom: 0; width: 250px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white; padding: 20px;
        }
        .sidebar-brand { font-size: 18px; font-weight: 700; margin-bottom: 30px; }
        .sidebar-menu a {
            display: block; padding: 12px 15px; color: rgba(255,255,255,0.8);
            text-decoration: none; border-radius: 10px; margin-bottom: 5px;
        }
        .sidebar-menu a:hover, .sidebar-menu a.active { background: rgba(255,255,255,0.2); color: white; }
        .main-content { margin-left: 250px; padding: 20px; }
        .card { border: none; border-radius: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); margin-bottom: 20px; }
        .stat-card { text-align: center; padding: 20px; }
        .stat-value { font-size: 32px; font-weight: 700; color: var(--pink); }
        .stat-label { color: #666; font-size: 14px; }
        .btn-pink { background: var(--pink); border-color: var(--pink); color: white; }
        .btn-pink:hover { background: #d81b7a; color: white; }
        .ai-status { padding: 15px; border-radius: 10px; }
        .ai-status.online { background: #d4edda; border: 1px solid #28a745; }
        .ai-status.offline { background: #fff3cd; border: 1px solid #ffc107; }
        @media (max-width: 768px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; }
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-brand">
            <i class="fas fa-hospital me-2"></i>‡∏£‡∏û.‡∏£‡∏≤‡∏ä‡∏ß‡∏¥‡∏ñ‡∏µ Admin
        </div>
        <div class="sidebar-menu">
            <a href="#" class="active"><i class="fas fa-tachometer-alt me-2"></i>Dashboard</a>
            <a href="#buildings"><i class="fas fa-building me-2"></i>‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£</a>
            <a href="#ai-settings"><i class="fas fa-robot me-2"></i>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ AI</a>
            <a href="/map-editor"><i class="fas fa-map me-2"></i>Map Editor</a>
            <a href="/"><i class="fas fa-home me-2"></i>‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
        </div>
    </div>
    
    <div class="main-content">
        <h4 class="mb-4"><i class="fas fa-tachometer-alt me-2 text-primary"></i>Dashboard</h4>
        
        <!-- Stats -->
        <div class="row mb-4">
            <div class="col-md-3 col-6">
                <div class="card stat-card">
                    <div class="stat-value">11</div>
                    <div class="stat-label">‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£</div>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="card stat-card">
                    <div class="stat-value">100+</div>
                    <div class="stat-label">‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="card stat-card">
                    <div class="stat-value">50+</div>
                    <div class="stat-label">‡∏à‡∏∏‡∏î‡∏ô‡∏≥‡∏ó‡∏≤‡∏á</div>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="card stat-card">
                    <div class="stat-value" id="ai-provider">-</div>
                    <div class="stat-label">AI Provider</div>
                </div>
            </div>
        </div>
        
        <!-- AI Status -->
        <div class="card" id="ai-settings">
            <div class="card-header bg-white">
                <i class="fas fa-robot me-2"></i>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ AI Assistant
            </div>
            <div class="card-body">
                <div class="ai-status offline" id="ai-status-box">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-circle me-2" id="ai-status-icon"></i>
                        <span id="ai-status-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö...</span>
                    </div>
                </div>
                
                <div class="mt-4">
                    <h6>‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô AI (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Render.com)</h6>
                    <ol class="mb-0">
                        <li>‡πÑ‡∏õ‡∏ó‡∏µ‡πà Dashboard ‡∏Ç‡∏≠‡∏á Render.com</li>
                        <li>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Web Service ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</li>
                        <li>‡πÑ‡∏õ‡∏ó‡∏µ‡πà <strong>Environment</strong> tab</li>
                        <li>‡πÄ‡∏û‡∏¥‡πà‡∏° Environment Variable:
                            <ul>
                                <li><code>OPENAI_API_KEY</code> = sk-xxx (API Key ‡∏à‡∏≤‡∏Å OpenAI)</li>
                            </ul>
                        </li>
                        <li>‡∏Å‡∏î <strong>Save Changes</strong></li>
                    </ol>
                </div>
                
                <div class="alert alert-info mt-3 mb-0">
                    <i class="fas fa-info-circle me-2"></i>
                    ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ API Key ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÉ‡∏ä‡πâ <strong>Local AI Response</strong> ‡∏ó‡∏µ‡πà‡∏ï‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡∏à‡∏≥‡∏Å‡∏±‡∏î ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ
                </div>
            </div>
        </div>
        
        <!-- Buildings -->
        <div class="card" id="buildings">
            <div class="card-header bg-white d-flex justify-content-between align-items-center">
                <span><i class="fas fa-building me-2"></i>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£</span>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table">
                        <thead class="table-light">
                            <tr>
                                <th>‡∏£‡∏´‡∏±‡∏™</th>
                                <th>‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£</th>
                                <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏±‡πâ‡∏ô</th>
                                <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>A</td><td>‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ó‡∏®‡∏°‡∏¥‡∏ô‡∏ó‡∏£‡∏≤‡∏ò‡∏¥‡∏£‡∏≤‡∏ä</td><td>25</td><td><span class="badge bg-primary">‡∏ï‡∏∂‡∏Å‡∏´‡∏•‡∏±‡∏Å</span></td></tr>
                            <tr><td>B</td><td>‡∏ï‡∏∂‡∏Å‡∏™‡∏¥‡∏£‡∏¥‡∏ô‡∏ò‡∏£</td><td>18</td><td><span class="badge bg-info">IPD</span></td></tr>
                            <tr><td>C</td><td>‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏â‡∏•‡∏¥‡∏°‡∏û‡∏£‡∏∞‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏Ø</td><td>12</td><td><span class="badge bg-success">OPD</span></td></tr>
                            <tr><td>D</td><td>‡∏ï‡∏∂‡∏Å‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£</td><td>5</td><td><span class="badge bg-secondary">‡∏ò‡∏∏‡∏£‡∏Å‡∏≤‡∏£</span></td></tr>
                            <tr><td>E</td><td>‡∏ï‡∏∂‡∏Å‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏•‡∏∞‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</td><td>4</td><td><span class="badge bg-danger">ER</span></td></tr>
                            <tr><td>F</td><td>‡∏ï‡∏∂‡∏Å‡∏≠‡∏≤‡∏¢‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°</td><td>6</td><td><span class="badge bg-info">IPD</span></td></tr>
                            <tr><td>G</td><td>‡∏ï‡∏∂‡∏Å‡∏™‡∏≠‡∏≤‡∏î ‡∏®‡∏¥‡∏£‡∏¥‡∏û‡∏±‡∏í‡∏ô‡πå</td><td>8</td><td><span class="badge bg-danger">‡∏´‡∏±‡∏ß‡πÉ‡∏à</span></td></tr>
                            <tr><td>H</td><td>‡∏ï‡∏∂‡∏Å‡∏´‡∏•‡∏ß‡∏á‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡πÄ‡∏ô‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</td><td>6</td><td><span class="badge bg-warning">‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å</span></td></tr>
                            <tr><td>I</td><td>‡∏ï‡∏∂‡∏Å‡πÄ‡∏à‡∏£‡∏¥‡∏ç ‡∏û‡∏π‡∏•‡∏ß‡∏£‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå</td><td>5</td><td><span class="badge bg-secondary">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</span></td></tr>
                            <tr><td>J</td><td>‡∏ï‡∏∂‡∏Å‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÇ‡∏£‡∏Ñ‡∏´‡∏±‡∏ß‡πÉ‡∏à</td><td>4</td><td><span class="badge bg-danger">‡∏´‡∏±‡∏ß‡πÉ‡∏à</span></td></tr>
                            <tr><td>K</td><td>‡∏ï‡∏∂‡∏Å‡∏ß‡∏≤‡∏®‡∏≠‡∏∏‡∏ó‡∏¥‡∏®</td><td>3</td><td><span class="badge bg-danger">EMS</span></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Conference Rooms -->
        <div class="card">
            <div class="card-header bg-white">
                <i class="fas fa-users me-2"></i>‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°
            </div>
            <div class="card-body">
                <h6>‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏â‡∏•‡∏¥‡∏°‡∏û‡∏£‡∏∞‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏Ø</h6>
                <ul>
                    <li><strong>‡∏ä‡∏±‡πâ‡∏ô 9:</strong> ‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏° SC, VC1, VC2, VC3, ‡∏´‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤</li>
                    <li><strong>‡∏ä‡∏±‡πâ‡∏ô 11:</strong> ‡πÇ‡∏¢‡∏ò‡∏µ, ‡∏£‡∏≤‡∏ä‡∏û‡∏§‡∏Å‡∏©‡πå, ‡∏™‡∏∏‡∏û‡∏£‡∏£‡∏ì‡∏¥‡∏Å‡∏≤‡∏£‡πå, ‡∏û‡∏ç‡∏≤‡πÑ‡∏ó, ‡∏õ‡∏≤‡∏£‡∏¥‡∏ä‡∏≤‡∏ï‡∏¥, ‡∏´‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏£</li>
                    <li><strong>‡∏ä‡∏±‡πâ‡∏ô 12:</strong> ‡∏û‡∏¥‡∏ö‡∏π‡∏•‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏° (‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏ç‡πà)</li>
                </ul>
                <h6>‡∏ï‡∏∂‡∏Å E (‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô)</h6>
                <ul class="mb-0">
                    <li><strong>‡∏ä‡∏±‡πâ‡∏ô 4:</strong> ‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏° EMS</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', checkAIStatus);
        
        async function checkAIStatus() {
            try {
                const res = await fetch('/api/ai/status');
                const data = await res.json();
                
                const box = document.getElementById('ai-status-box');
                const icon = document.getElementById('ai-status-icon');
                const text = document.getElementById('ai-status-text');
                const provider = document.getElementById('ai-provider');
                
                if (data.openai_configured || data.anthropic_configured) {
                    box.classList.remove('offline');
                    box.classList.add('online');
                    icon.style.color = '#28a745';
                    text.textContent = `‚úì ${data.message} (${data.active_provider.toUpperCase()})`;
                    provider.textContent = data.active_provider.toUpperCase();
                } else {
                    icon.style.color = '#ffc107';
                    text.textContent = `‚ö†Ô∏è ${data.message}`;
                    provider.textContent = 'Local';
                }
            } catch (e) {
                document.getElementById('ai-status-text').textContent = '‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ';
            }
        }
    </script>
</body>
</html>
